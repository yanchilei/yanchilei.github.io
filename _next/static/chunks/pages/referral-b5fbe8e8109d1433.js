(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5593],{91403:function(e,n,t){"use strict";var s,r=t(67294);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},o.apply(this,arguments)}n.Z=function(e){return r.createElement("svg",o({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=r.createElement("path",{d:"M5.667 3.333 10.333 8l-4.666 4.667",stroke:"#000",strokeWidth:1.5,strokeLinecap:"square"})))}},13107:function(e,n,t){"use strict";var s,r=t(67294);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},o.apply(this,arguments)}n.Z=function(e){return r.createElement("svg",o({width:21,height:21,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=r.createElement("path",{d:"m7.438 4.375 6.125 6.125-6.126 6.125",stroke:"#000",strokeWidth:1.5,strokeLinecap:"square"})))}},4688:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/referral",function(){return t(99123)}])},57796:function(e,n,t){"use strict";t.d(n,{L:function(){return r}});var s=t(9473);function r(){return{deviceId:(0,s.v9)((function(e){return e})).fingerprint.deviceId}}},99123:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ye}});var s,r,o,i=t(34051),d=t.n(i),l=t(85893),a=t(67294),c=t(25402),u=t(63500),p=t(11163),x=t(57857),m=t(13107),h=t(91403),f=function(e){var n=e.home,t=e.breads,s=(0,p.useRouter)(),r=(0,x.J)().t;return(0,l.jsx)(u.Z,{sx:{mt:{xs:"64px",sm:"64px",md:"64px"}},children:(0,l.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(c.Z,{onClick:function(){return s.push(n?n.path:"/")},sx:{fontWeight:400,fontSize:{xs:12,sm:12,md:16},lineHeight:{xs:"16px",sm:"16px",md:"21px"},color:"#A1A1AA",cursor:"pointer"},children:(null===n||void 0===n?void 0:n.name)||r("homepage")}),t&&t.map((function(e){return(0,l.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(c.Z,{sx:{height:"21px",margin:"0 4px",display:{xs:"none",sm:"none",md:"block"},alignItems:"center"},children:(0,l.jsx)(m.Z,{})}),(0,l.jsx)(c.Z,{sx:{height:"16px",margin:"0 4px",display:{xs:"block",sm:"block",md:"none"},alignItems:"center"},children:(0,l.jsx)(h.Z,{})}),(0,l.jsx)(c.Z,{onClick:function(){return e.path&&s.push(e.path)},sx:{display:"block",cursor:e.path?"pointer":"unset",fontWeight:400,fontSize:{xs:12,sm:12,md:16},lineHeight:{xs:"16px",sm:"16px",md:"21px"},color:"#18181B"},children:e.name})]},e.name)}))]})})},g=t(32245),v=t(42190),b=t(16935),E=t(8136),j=t(89711);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},y.apply(this,arguments)}var w=function(e){return a.createElement("svg",y({width:34,height:34,viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=a.createElement("circle",{cx:18,cy:18,r:18,fill:"#27272A"})),r||(r=a.createElement("g",{clipPath:"url(#facebook-hover_svg__a)"},a.createElement("path",{d:"M20 19.5h2.5l1-4H20v-2c0-1.03 0-2 2-2h1.5V8.14c-.326-.043-1.557-.14-2.857-.14C17.928 8 16 9.657 16 12.7v2.8h-3v4h3V28h4v-8.5Z",fill:"#FAFAFA"}))),o||(o=a.createElement("defs",null,a.createElement("clipPath",{id:"facebook-hover_svg__a"},a.createElement("path",{fill:"#fff",transform:"translate(6 6)",d:"M0 0h24v24H0z"})))))},A=t(90284),Z=t(4230),k=t(26602),S=function(e){var n=e.user,t=(0,p.useRouter)(),s=(0,x.J)().t,r=(0,x.J)().currentLang,o=(0,a.useState)("referral.banner_click_copy"),i=o[0],d=o[1],m=(0,a.useMemo)((function(){return(null===n||void 0===n?void 0:n.hash)?"".concat(window.location.origin,"/invitation/").concat(null===n||void 0===n?void 0:n.hash):"Loading..."}),[null===n||void 0===n?void 0:n.hash]),h=(0,a.useCallback)((function(){(0,Z.KM)(k.ng.SHARE_COPY_REFERRAL,{stage:null===n||void 0===n?void 0:n.stage,stageTime:null===n||void 0===n?void 0:n.timestamp,userType:(0,Z.Ng)(n)}),(null===n||void 0===n?void 0:n.hash)&&((0,b.T)(m),d("referral.banner_copied"),setTimeout((function(){return d("referral.banner_click_copy")}),1e3))}),[m,n]),f=(0,a.useCallback)((function(){if((0,Z.KM)(k.ng.SHARE_ON_REFERRAL,{stage:null===n||void 0===n?void 0:n.stage,stageTime:null===n||void 0===n?void 0:n.timestamp,userType:(0,Z.Ng)(n)}),null===n||void 0===n?void 0:n.hash)return window.open("https://twitter.com/intent/tweet?title=".concat(s("share.home_content_01")).concat(s("share.home_content_02")).concat(A.QZ,"/refer-poster/").concat(null===n||void 0===n?void 0:n.hash,"/").concat(r,"%0A%0A").concat(s("share.home_content_03")))}),[r,s,n]);return(0,l.jsxs)(c.Z,{sx:{mt:{xs:"32px",sm:"32px",md:"60px"},overflow:"hidden"},children:[(0,l.jsxs)(u.Z,{sx:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",overflow:"hidden",fontSize:{xs:"12px",sm:"12px",md:"16px"},mt:0,ml:{xs:"5%",sm:"5%",md:"auto"}},children:[(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(c.Z,{sx:{fontSize:{xs:28,sm:28,md:48},fontWeight:800,mb:"16px"},children:s("referral.banner_title")}),(0,l.jsx)(c.Z,{sx:{color:"#71717A",mb:"8px"},children:s("referral.banner_des_1")}),(0,l.jsxs)(c.Z,{sx:{color:"#71717A"},children:[s("referral.banner_des_2"),"\xa0",(0,l.jsx)("span",{style:{color:"#27272A",textDecoration:"underline",cursor:"pointer"},onClick:function(){return t.push("/refer")},children:s("referral.banner_des_3")})]})]}),(0,l.jsx)(g.Z,{component:"img",src:"/images/referral/referral-banner-logo.png",sx:{width:{xs:120,sm:160,md:240},mb:"-16px",mt:{xs:"32px",sm:"32px",md:"unset"}}})]}),(0,l.jsxs)(u.Z,{sx:{border:"1px solid #E4E4E7",borderRadius:"12px",overflow:"hidden",mt:0},children:[(0,l.jsx)(c.Z,{sx:{p:"16px 24px",background:"#52525B",color:"#FFF"},children:s("referral.banner_link")}),(0,l.jsxs)(c.Z,{sx:{display:"flex",justifyContent:{xs:"end",sm:"end",md:"space-between"},borderBottom:"1px solid #E4E4E7"},children:[(0,l.jsx)(c.Z,{sx:{width:{xs:"100%",sm:"100%",md:"calc(100% - 100px)"},p:{xs:"8px 16px",sm:"8px 16px",md:"16px"},wordWrap:"break-word",wordBreak:"break-all",overflow:"hidden",fontSize:{xs:"12px",sm:"12px",md:"16px"}},children:m}),(0,l.jsx)(v.Z,{disableFocusListener:!0,title:s(i),placement:"bottom",children:(0,l.jsx)(c.Z,{onClick:h,sx:{background:"#FAFAFA",width:"100px",p:{xs:"8px 0",sm:"8px 0",md:"unset"},display:"flex",alignItems:"center",justifyContent:"center",borderLeft:{xs:"none",sm:"none",md:"1px solid #E4E4E7"},borderTop:{xs:"1px solid #E4E4E7",sm:"1px solid #E4E4E7",md:"none"},cursor:"pointer"},children:s("referral.banner_copy")})})]}),(0,l.jsx)(c.Z,{sx:{p:"16px",borderBottom:"1px solid #E4E4E7",display:"flex",alignItems:"center",color:"#A1A1AA",fontSize:{xs:"12px",sm:"12px",md:"16px"}},children:s("referral.banner_share_text")}),(0,l.jsxs)(c.Z,{sx:{p:"16px",background:"#FAFAFA",display:"flex",flexDirection:{xs:"column",sm:"column",md:"row"},alignItems:{xs:"start",sm:"start",md:"center"},color:"#71717A"},children:[(0,l.jsx)(c.Z,{sx:{fontSize:{xs:"14px",sm:"14px",md:"16px"},mb:{xs:"16px",sm:"16px",md:"0px"},mr:"24px"},children:s("referral.banner_share_link")}),(0,l.jsxs)(c.Z,{sx:{display:"inline-flex",alignItems:"center"},children:[(0,l.jsx)(c.Z,{onClick:f,style:{display:"flex",alignContent:"center",marginRight:"24px",cursor:"pointer"},children:(0,l.jsx)(j.Z,{})}),(0,l.jsx)(E.Z,{url:m,title:s("referral.banner_twitter_text"),quote:s("referral.banner_twitter_text"),hashtag:"KEKKAI",style:{display:"flex",alignContent:"center",marginRight:"24px"},children:(0,l.jsx)(w,{})})]})]})]})]})},C=function(e){var n=e.width,t=void 0===n?75:n,s=e.height,r=void 0===s?75:s,o=e.speed,i=void 0===o?3:o,d=e.sx;return(0,l.jsx)(c.Z,{sx:Object.assign({},d,{width:t,height:r}),children:(0,l.jsx)(g.Z,{component:"img",src:"/images/referral/loading.png",sx:{width:"100%",height:"100%",animation:"spin ".concat(i,"s linear infinite")}})})},_=t(50057),I=t(88550),F=t(54054),O=t(44846),R=t(74678),K=t(7122),T=t(13847),N=t(83911),W=t(68438),M=t(24787),D=t(72790),P=t(2647),z=t(25618);function L(e){var n=new Date(e),t=n.getFullYear(),s=n.getMonth()+1,r=n.getDate(),o=n.getHours(),i=n.getMinutes();n.getSeconds();return"".concat(t,".").concat(s<10?"0"+s:s,".").concat(r<10?"0"+r:r," ").concat(o<10?"0"+o:o,":").concat(i<10?"0"+i:i)}var B=t(58705),U=function(e){var n=e.users,t=e.open,s=e.onClose,r=(0,a.useState)(1),o=r[0],i=r[1],d=(0,a.useMemo)((function(){return n&&n.length>0?n.length%6>0?Math.floor(n.length/6)+1:n.length/6:0}),[n]),u=(0,a.useMemo)((function(){return null===n||void 0===n?void 0:n.slice(6*(o-1),6*o)}),[o,n]);return(0,l.jsxs)(F.Z,{open:t,onClose:s,maxWidth:!1,sx:{".MuiPaper-elevation":{maxWidth:"100%",m:0,width:{xs:"100%",sm:"100%",md:"auto"},position:{xs:"absolute",sm:"absolute",md:"unset"},bottom:{xs:0,sm:0,md:"unset"}}},children:[(0,l.jsxs)(O.Z,{sx:{color:"#000",display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:800,fontSize:{xs:16,sm:16,md:20}},children:[(0,l.jsx)("span",{children:"Accounts You\u2019ve Referred"}),(0,l.jsx)(B.Z,{style:{cursor:"pointer"},onClick:s})]}),(0,l.jsx)(R.Z,{sx:{width:{xs:"100%",sm:"100%",md:"840px"},height:"480px",p:{xs:0,sm:0,md:"unset"}},children:(0,l.jsxs)(K.Z,{sx:{td:{color:"#000"},th:{color:"#000"}},children:[(0,l.jsxs)(T.Z,{sx:{border:"1px solid rgba(224, 224, 224, 1)",th:{borderLeft:"1px solid rgba(224, 224, 224, 1)",borderRight:"1px solid rgba(224, 224, 224, 1)",p:"4px 16px"},background:"#FAFAFA"},children:[(0,l.jsx)(N.Z,{children:"Date"}),(0,l.jsx)(N.Z,{children:"Account"}),(0,l.jsx)(N.Z,{children:"Status"})]}),(0,l.jsx)(W.Z,{sx:{td:{borderLeft:"1px solid rgba(224, 224, 224, 1)",borderRight:"1px solid rgba(224, 224, 224, 1)",fontSize:{xs:"12px",sm:"12px",md:"unset"}}},children:u&&u.map((function(e){return(0,l.jsxs)(M.Z,{children:[(0,l.jsx)(N.Z,{children:e.timestamp&&L(e.timestamp).split(" ")[0]}),(0,l.jsx)(N.Z,{sx:{wordBreak:"break-all"},children:e.address}),(0,l.jsx)(N.Z,{sx:{textAlign:"right",div:{height:{xs:"auto",sm:"auto",md:"37px"},lineHeight:{xs:"auto",sm:"auto",md:"37px"},borderRadius:"33px",fontWeight:700,display:"inline-block",p:"0 12px"}},children:e.stage===z.Mi.COMPLETE?(0,l.jsx)(c.Z,{sx:{background:{xs:"none",sm:"none",md:"rgba(16, 189, 125, 0.1)"},color:"rgba(16, 189, 125, 1)"},children:"Complete"}):e.stage===z.Mi.NOT_USE?(0,l.jsx)(c.Z,{sx:{background:{xs:"none",sm:"none",md:"rgba(249, 115, 22, 0.1)"},color:"rgba(249, 115, 22, 1)"},children:"Not yet use KEKKAI"}):(0,l.jsx)(c.Z,{sx:{background:{xs:"none",sm:"none",md:"rgba(244, 63, 94, 0.1)"},color:"rgba(244, 63, 94, 1)"},children:"Not yet install KEKKAI"})})]},e.address)}))})]})}),n&&n.length&&(0,l.jsx)(D.Z,{spacing:2,sx:{p:"24px 0"},children:(0,l.jsx)(P.Z,{count:d,sx:{m:"auto"},onChange:function(e,n){return i(n)}})})]})},G=function(e){var n=e.rewards,t=e.open,s=e.onClose,r=(0,a.useState)(1),o=r[0],i=r[1],d=(0,a.useMemo)((function(){return n&&n.length>0?n.length%9>0?Math.floor(n.length/9)+1:n.length/9:0}),[n]),u=(0,a.useMemo)((function(){return null===n||void 0===n?void 0:n.slice(9*(o-1),9*o)}),[o,n]),p=(0,a.useCallback)((function(e){return e===z.E4.DISCORD_ROLE?"Discord Supporter Role":e===z.E4.KEKKAI_SBT?"KEKKAI SBT":e===z.E4.GENESIS_NFT?"GENESIS NFT":e===z.E4.ONE_KEY?"KEKKAI ONE KEY":e}),[]);return(0,l.jsxs)(F.Z,{open:t,onClose:s,maxWidth:!1,sx:{".MuiPaper-elevation":{maxWidth:"100%",m:0,width:{xs:"100%",sm:"100%",md:"auto"},position:{xs:"absolute",sm:"absolute",md:"unset"},bottom:{xs:0,sm:0,md:"unset"}}},children:[(0,l.jsxs)(O.Z,{sx:{color:"#000",display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:800},children:[(0,l.jsx)("span",{children:"Rewards you\u2019ve received"}),(0,l.jsx)(B.Z,{style:{cursor:"pointer"},onClick:s})]}),(0,l.jsx)(R.Z,{sx:{width:{xs:"100%",sm:"100%",md:"780px"},height:"340px",display:"flex",flexWrap:"wrap"},children:u&&u.length>0&&u.map((function(e,n){return(0,l.jsxs)(c.Z,{sx:{textAlign:"center",width:"calc(33% - 16px)",m:"0 8px"},children:[(0,l.jsx)(g.Z,{component:"img",src:"/images/refer/reward-0".concat(Number(e.type)+1,".png"),sx:{width:60,height:60,borderRadius:"50%"}}),(0,l.jsx)(c.Z,{sx:{color:"#27272A",fontSize:"12px",textAlign:"center",wordBreak:"keep-all",fontWeight:700},children:p(e.type)})]},n)}))}),n&&n.length>0&&(0,l.jsx)(D.Z,{spacing:2,sx:{p:"24px 0"},children:(0,l.jsx)(P.Z,{count:d,sx:{m:"auto"},onChange:function(e,n){return i(n)}})})]})},H=t(94996);function Y(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,a.useState)({positive:!0}),t=n[0],s=n[1],r=(0,a.useCallback)((function(n){if(e)s({positive:!0});else if(0!==n.length){var t=n.find((function(e){return e.check()}));s(t?{positive:!1,msg:t.msg}:{positive:!0})}else s({positive:!0})}),[e]);return{validation:t,checkValidatedConditions:r}}var J=[{name:"KEKKAI Discord Supporter Role",des:"Chances to win Allowlist!"},{name:"KEKKAI SBT",des:"Passport to get every KEKKAI merch from our offline events!"},{name:"KEKKAI  Genesis NFT Allow List",des:"Lifetime of free KEKKAI?! KEKKAI Token?! And MORE!"},{name:"KEKKAI Onekey ",des:"Limited Edition.First come first serve!"}],V=function(e){var n=e.open,t=e.user,s=e.onClose,r=e.onConfirm,o=e.convertedRewards,i=Y(),d=i.validation,u=i.checkValidatedConditions,p=(0,x.J)().t,m=(0,a.useState)(),h=m[0],f=m[1],b=(0,a.useState)(),E=b[0],j=b[1],y=(0,a.useMemo)((function(){return Array.isArray(h)?h.sort((function(e,n){return e.point-n.point})):h}),[h]),w=(0,a.useMemo)((function(){return o&&o.some((function(e){return e.type===z.E4.DISCORD_ROLE}))&&(null===E||void 0===E?void 0:E.type)===z.E4.DISCORD_ROLE}),[null===E||void 0===E?void 0:E.type,o]),Z=(0,a.useMemo)((function(){return o&&o.some((function(e){return e.type===z.E4.ONE_KEY}))&&(null===E||void 0===E?void 0:E.type)===z.E4.ONE_KEY}),[null===E||void 0===E?void 0:E.type,o]);return(0,a.useEffect)((function(){(0,_.W)(A.jF,{method:"GET"}).then((function(e){return f(e)}))}),[]),(0,a.useEffect)((function(){n||j(void 0)}),[n]),(0,a.useEffect)((function(){u([{check:function(){return!t},msg:"No user check"},{check:function(){return!E},msg:"Select a reward first"},{check:function(){return((null===t||void 0===t?void 0:t.points)||0)<((null===E||void 0===E?void 0:E.point)||0)},msg:"No enough points"},{check:function(){return!!w},msg:"Has exchanged discord role"},{check:function(){return!!Z},msg:"Has exchanged one key"}])}),[E,u,w,Z,t]),(0,l.jsxs)(F.Z,{open:n,onClose:s,maxWidth:!1,sx:{".MuiPaper-elevation":{maxWidth:"100%",m:0,width:{xs:"100%",sm:"100%",md:"auto"},position:{xs:"absolute",sm:"absolute",md:"unset"},bottom:{xs:0,sm:0,md:"unset"}}},children:[(0,l.jsxs)(O.Z,{sx:{color:"#000",display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:800,fontSize:{xs:"16px",sm:"16px",md:"20px"}},children:[(0,l.jsx)("span",{children:p("popup.select_rewards")}),(0,l.jsx)(B.Z,{style:{cursor:"pointer"},onClick:s})]}),(0,l.jsxs)(R.Z,{sx:{width:{xs:"auto",sm:"auto",md:"840px"},display:"flex",justifyContent:{xs:"start",sm:"start",md:"center"},overflowX:{xs:"scroll",sm:"scroll",md:"hidden"},p:{xs:"0px 16px 60px 16px",sm:"0px 16px 60px 16px",md:"0px 64px 60px 64px"},paddingTop:"48px !important",borderTop:"1px solid #E4E4E7"},children:[y&&y.length>0&&y.map((function(e,n){var t=J[e.type]&&Object.assign({},e,J[e.type]);return(0,l.jsxs)(c.Z,{sx:{textAlign:"start",width:{xs:"90px",sm:"90px",md:"25%"},mr:{xs:"12px",sm:"24px",md:0}},children:[(0,l.jsxs)(c.Z,{onClick:function(){return j(e)},sx:{width:{xs:84,sm:84,md:120},height:{xs:84,sm:84,md:120},borderRadius:"50%",overflow:"hidden",position:"relative",m:"auto",mb:"12px",cursor:"pointer",transform:t.id===(null===E||void 0===E?void 0:E.id)?"scale(1.2)":"scale(1.0)",transition:"transform 0.2s"},children:[(0,l.jsx)(g.Z,{component:"img",src:"/images/refer/reward-0".concat(Number(t.type)+1,".png"),sx:{width:"105%",borderRadius:"50%",height:"105%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),(0,l.jsxs)(c.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"32px",fontWeight:800,color:"#FFF"},children:[t.point,(0,l.jsx)("span",{style:{marginLeft:"4px",fontSize:"18px"},children:t.point>1?"points":"point"})]})]}),(0,l.jsx)(c.Z,{sx:{color:"#27272A",fontSize:"16px",textAlign:"center",wordBreak:"keep-all",fontWeight:700,cursor:"pointer"},children:t.name})]},n)})),Array.isArray(h)&&0===h.length&&"No Rewards Available",!h&&"Loading"]}),(0,l.jsxs)(H.Z,{sx:{height:{xs:"60px",sm:"60px",md:"80px"},borderTop:{xs:"none",sm:"none",md:"solid 1px #E4E4E7"},p:0,fontSize:{xs:"15px",sm:"15px",md:"24px"},fontWeight:700,cursor:"pointer",display:"flex",justifyContent:"space-evenly"},children:[(0,l.jsx)(c.Z,{onClick:s,sx:{width:{xs:"45%",sm:"45%",md:"50%"},height:{xs:"46px",sm:"46px",md:"100%"},display:"flex",justifyContent:"center",alignItems:"center",background:"#FAFAFA",color:"#A1A1AA",borderRadius:{xs:"46px",sm:"46px",md:"0px"}},children:p("popup.not_this_time")}),(0,l.jsx)(v.Z,{title:d.msg||"",placement:"top",children:(0,l.jsx)(c.Z,{onClick:function(){d.positive&&E&&r(E)},sx:{width:{xs:"45%",sm:"45%",md:"50%"},display:"flex",justifyContent:"center",alignItems:"center",background:d.positive?"#27272A":"#FAFAFA",color:d.positive?"#FFF":"#A1A1AA",height:{xs:"46px",sm:"46px",md:"100%"},ml:"0px !important",borderLeft:"solid 1px #E4E4E7",cursor:d.positive?"pointer":"not-allowed",borderRadius:{xs:"46px",sm:"46px",md:"0px"}},children:p("popup.claim_my_rewards")})})]})]})},X=t(12056),Q=t(39582),q=t(34461),$=t(25424);function ee(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var ne=function(e){var n,t=e.user,s=e.open,r=e.onClose,o=e.chosenReward,i=(0,Q.d)(),d=i.login,u=(i.logout,Y()),p=u.validation,m=u.checkValidatedConditions,h=(0,q.p)().setTip,f=(0,$.a)().setUser,g=(0,x.J)().t,b=(0,I.Q)((function(e){var n=e.rewardId,t=e.discordId,s=e.address;return(0,_.W)(A.F2,{method:"POST",data:{rewardId:n,discordId:t,address:s}})})),E=b.status,j=b.response,y=b.error,w=b.launch,S=(0,a.useState)(),K=S[0],T=S[1],N=(0,a.useState)(!1),W=N[0],M=N[1],D=(0,a.useMemo)((function(){return W&&!K}),[W,K]),P=(0,a.useMemo)((function(){return!p.positive||"loading"===E}),[E,p.positive]);return(0,a.useEffect)((function(){m([{check:function(){return!t||!t.points},msg:"No User Points"},{check:function(){return!o||!o.point},msg:"Unexchangeable Reward"},{check:function(){return!!(null===t||void 0===t?void 0:t.points)&&!!(null===o||void 0===o?void 0:o.point)&&t.points-o.point<0},msg:"Not enough points"},{check:function(){return!K},msg:"Empty Discord ID"}])}),[m,o,K,t]),(0,a.useEffect)((function(){if("success"===E){var e=j.userInfo;return e&&t&&f(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},s=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),s.forEach((function(n){ee(e,n,t[n])}))}return e}({},t,{points:e.points})),r(),void h({status:!0,type:"success",msg:"Success"})}if("failed"===E)return r(),void h({status:!0,type:"error",msg:y.data.msg||"Something went wrong"})}),[null===y||void 0===y||null===(n=y.data)||void 0===n?void 0:n.msg,E]),(0,l.jsxs)(F.Z,{open:s,onClose:r,maxWidth:!1,sx:{".MuiPaper-elevation":{maxWidth:"100%",m:0,width:{xs:"100%",sm:"100%",md:"auto"},position:{xs:"absolute",sm:"absolute",md:"unset"},bottom:{xs:0,sm:0,md:"unset"}}},children:[(0,l.jsxs)(O.Z,{sx:{color:"#000",display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:800},children:[(0,l.jsx)("span",{children:g("popup.claim_your_rewards")}),(0,l.jsx)(B.Z,{style:{cursor:"pointer"},onClick:function(){r()}})]}),(0,l.jsxs)(R.Z,{sx:{width:{xs:"100%",sm:"100%",md:"840px"},p:"52px 24px 36px 24px",paddingTop:"16px !important",borderTop:"1px solid #E4E4E7"},children:[(0,l.jsx)(X.Z,{error:D,label:"Discord ID",placeholder:"Type your ID here...",fullWidth:!0,onChange:function(e){!W&&M(!0),T(e.target.value)}}),(0,l.jsxs)(c.Z,{sx:{height:"110px",width:"100%",background:"#FAFAFA",border:"solid 1px #E4E4E7",mt:"36px",borderRadius:"8px",display:"flex",alignItems:"center",fontSize:{xs:"11px",sm:"11px",md:"unset"},div:{flex:1,textAlign:"center"}},children:[(0,l.jsxs)(c.Z,{children:[g("popup.points_for_reward"),(0,l.jsx)(c.Z,{children:(null===o||void 0===o?void 0:o.point)||"--"})]}),(0,l.jsxs)(c.Z,{children:[g("popup.total_points"),(0,l.jsx)(c.Z,{children:(null===t||void 0===t?void 0:t.totalPoints)||0})]}),(0,l.jsxs)(c.Z,{children:[g("popup.left_points"),(0,l.jsx)(c.Z,{children:(null===t||void 0===t?void 0:t.points)||0})]})]})]}),(0,l.jsxs)(H.Z,{sx:{height:{xs:"46px",sm:"46px",md:"80px"},borderTop:{xs:"none",sm:"none",md:"solid 1px #E4E4E7"},p:0,fontSize:{xs:"15px",sm:"15px",md:"24px"},mb:{xs:"32px",sm:"32px",md:"unset"},display:"flex",justifyContent:"space-evenly",fontWeight:700,cursor:"pointer"},children:[(0,l.jsx)(c.Z,{onClick:r,sx:{width:{xs:"45%",sm:"45%",md:"50%"},borderRadius:{xs:"46px",sm:"46px",md:"unset"},display:"flex",justifyContent:"center",alignItems:"center",height:"100%",background:"#FAFAFA",color:"#A1A1AA"},children:g("popup.not_this_time")}),(0,l.jsx)(v.Z,{title:p.msg||"",placement:"top",children:(0,l.jsxs)(c.Z,{onClick:function(){var e;P||(null===o||void 0===o?void 0:o.id)&&K&&(null===(e=d())||void 0===e||e.then((function(){return w({rewardId:o.id,discordId:K})})).then((function(){var e="";switch(o.type){case z.E4.DISCORD_ROLE:e="Discord Role";break;case z.E4.GENESIS_NFT:e="Genesis NFT";break;case z.E4.KEKKAI_SBT:e="Kekkai SBT";break;case z.E4.ONE_KEY:e="One Key";break;default:e="Other"}(0,Z.KM)(k.nz.REWARD_EXCHANGE_SUCCESS,{stage:null===t||void 0===t?void 0:t.stage,stageTime:null===t||void 0===t?void 0:t.timestamp,userType:(0,Z.Ng)(t),rewardId:null===o||void 0===o?void 0:o.id,rewardName:e,rewardType:null===o||void 0===o?void 0:o.type})})))},sx:{display:"flex",justifyContent:"center",alignItems:"center",background:P?"#FAFAFA":"#27272A",color:P?"#A1A1AA":"#FFF",height:"100%",ml:"0px !important",cursor:P?"not-allowed":"pointer",width:{xs:"45%",sm:"45%",md:"50%"},borderLeft:{xs:"none",sm:"none",md:"solid 1px #E4E4E7"},borderRadius:{xs:"46px",sm:"46px",md:"unset"}},children:[g("popup.submit"),"loading"===E&&(0,l.jsx)(C,{width:32,height:32,sx:{ml:"32px"}})]})})]})]})};function te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var se=function(e){var n,t=e.user,s=e.open,r=e.onClose,o=e.chosenReward,i=(0,Q.d)(),d=i.login,u=(i.logout,Y()),p=u.validation,m=u.checkValidatedConditions,h=(0,q.p)().setTip,f=(0,x.J)().t,g=(0,$.a)().setUser,E=(0,I.Q)((function(e){var n=e.rewardId,t=e.contactName,s=e.consigneeAddress,r=e.phoneNumber,o=e.email,i=e.address;return(0,_.W)(A.F2,{method:"POST",data:{rewardId:n,address:i,contactName:t,consigneeAddress:s,phoneNumber:r,email:o}})})),j=E.status,y=E.response,w=E.error,S=E.launch,K=(0,a.useState)(),T=K[0],N=K[1],W=(0,a.useState)(),M=W[0],D=W[1],P=(0,a.useState)(),L=P[0],U=P[1],G=(0,a.useState)(),J=G[0],V=G[1],ee=(0,a.useState)(!1),ne=ee[0],se=ee[1],re=(0,a.useState)(!1),oe=re[0],ie=re[1],de=(0,a.useState)(!1),le=de[0],ae=de[1],ce=(0,a.useState)(!1),ue=ce[0],pe=ce[1],xe=(0,a.useMemo)((function(){return ne&&!T}),[T,ne]),me=(0,a.useMemo)((function(){return oe&&!M}),[M,oe]),he=(0,a.useMemo)((function(){return le&&!L}),[L,le]),fe=(0,a.useMemo)((function(){return ue&&!(0,b.o)(J||"")}),[J,ue]),ge=(0,a.useMemo)((function(){return!p.positive||"loading"===j}),[j,p.positive]);return(0,a.useEffect)((function(){m([{check:function(){return!t||!t.points},msg:"No User Points"},{check:function(){return!o||!(null===o||void 0===o?void 0:o.point)},msg:"Unexchangeable Reward"},{check:function(){return((null===t||void 0===t?void 0:t.points)||0)<((null===o||void 0===o?void 0:o.point)||0)},msg:"Not enough points"},{check:function(){return!T},msg:"Empty Name"},{check:function(){return!M},msg:"Empty Phone"},{check:function(){return!L},msg:"Empty Home Address"},{check:function(){return!(0,b.o)(J||"")},msg:"Invalid Email Address"}])}),[m,o,L,J,T,M,t]),(0,a.useEffect)((function(){s||(N(void 0),D(void 0),U(void 0),V(void 0),se(!1),ie(!1),ae(!1),pe(!1))}),[s]),(0,a.useEffect)((function(){if("success"===j){var e=y.userInfo;return t&&e&&g(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},s=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),s.forEach((function(n){te(e,n,t[n])}))}return e}({},t,{points:e.points})),r(),void h({status:!0,type:"success",msg:"Success"})}if("failed"===j)return r(),void h({status:!0,type:"error",msg:w.data.msg||"Something went wrong"})}),[null===w||void 0===w||null===(n=w.data)||void 0===n?void 0:n.msg,j]),(0,l.jsxs)(F.Z,{open:s,onClose:function(){r()},maxWidth:!1,sx:{".MuiPaper-elevation":{maxWidth:"100%",m:0,width:{xs:"100%",sm:"100%",md:"auto"},position:{xs:"absolute",sm:"absolute",md:"unset"},bottom:{xs:0,sm:0,md:"unset"}}},children:[(0,l.jsxs)(O.Z,{sx:{color:"#000",display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:800},children:[(0,l.jsx)("span",{children:f("popup.claim_your_rewards")}),(0,l.jsx)(B.Z,{style:{cursor:"pointer"},onClick:function(){r()}})]}),(0,l.jsxs)(R.Z,{sx:{width:{xs:"100%",sm:"100%",md:"840px"},p:"52px 24px 36px 24px",paddingTop:"40px !important",borderTop:"1px solid #E4E4E7"},children:[(0,l.jsx)(X.Z,{error:xe,label:f("popup.name"),placeholder:"Type your name here...",sx:{width:"45%",mb:"48px"},onChange:function(e){!ne&&se(!0),N(e.target.value)}}),(0,l.jsx)(X.Z,{error:me,label:f("popup.phone_number"),placeholder:"Type your phone number here...",sx:{width:"45%",float:"right"},onChange:function(e){!oe&&ie(!0),D(e.target.value)}}),(0,l.jsx)(X.Z,{error:he,label:f("popup.home_address"),placeholder:"Type your home address here...",fullWidth:!0,sx:{mb:"48px"},onChange:function(e){!le&&ae(!0),U(e.target.value)}}),(0,l.jsx)(X.Z,{error:fe,label:f("popup.email_address"),placeholder:"Type your email here...",fullWidth:!0,onChange:function(e){!ue&&pe(!0),V(e.target.value)}}),(0,l.jsxs)(c.Z,{sx:{height:"110px",width:"100%",background:"#FAFAFA",border:"solid 1px #E4E4E7",mt:"36px",borderRadius:"8px",display:"flex",alignItems:"center",fontSize:{xs:"11px",sm:"11px",md:"unset"},div:{flex:1,textAlign:"center"}},children:[(0,l.jsxs)(c.Z,{children:[f("popup.points_for_reward"),(0,l.jsx)(c.Z,{children:(null===o||void 0===o?void 0:o.point)||"--"})]}),(0,l.jsxs)(c.Z,{children:[f("popup.total_points"),(0,l.jsx)(c.Z,{children:(null===t||void 0===t?void 0:t.totalPoints)||0})]}),(0,l.jsxs)(c.Z,{children:[f("popup.left_points"),(0,l.jsx)(c.Z,{children:(null===t||void 0===t?void 0:t.points)||0})]})]})]}),(0,l.jsxs)(H.Z,{sx:{height:{xs:"46px",sm:"46px",md:"80px"},borderTop:{xs:"none",sm:"none",md:"solid 1px #E4E4E7"},p:0,fontSize:{xs:"15px",sm:"15px",md:"24px"},mb:{xs:"32px",sm:"32px",md:"unset"},display:"flex",justifyContent:"space-evenly",fontWeight:700,cursor:"pointer"},children:[(0,l.jsx)(c.Z,{onClick:function(){_.W,r()},sx:{width:{xs:"45%",sm:"45%",md:"50%"},borderRadius:{xs:"46px",sm:"46px",md:"unset"},display:"flex",justifyContent:"center",alignItems:"center",height:"100%",background:"#FAFAFA",color:"#A1A1AA"},children:f("popup.not_this_time")}),(0,l.jsx)(v.Z,{title:p.msg||"",placement:"top",children:(0,l.jsxs)(c.Z,{onClick:function(){var e;ge||(null===o||void 0===o?void 0:o.id)&&T&&L&&M&&J&&(null===(e=d())||void 0===e||e.then((function(){return S({rewardId:null===o||void 0===o?void 0:o.id,contactName:T,consigneeAddress:L,phoneNumber:M,email:J})})).then((function(){var e="";switch(o.type){case z.E4.DISCORD_ROLE:e="Discord Role";break;case z.E4.GENESIS_NFT:e="Genesis NFT";break;case z.E4.KEKKAI_SBT:e="Kekkai SBT";break;case z.E4.ONE_KEY:e="One Key";break;default:e="Other"}(0,Z.KM)(k.nz.REWARD_EXCHANGE_SUCCESS,{stage:null===t||void 0===t?void 0:t.stage,stageTime:null===t||void 0===t?void 0:t.timestamp,userType:(0,Z.Ng)(t),rewardId:null===o||void 0===o?void 0:o.id,rewardName:e,rewardType:null===o||void 0===o?void 0:o.type})})))},sx:{width:{xs:"45%",sm:"45%",md:"50%"},display:"flex",justifyContent:"center",alignItems:"center",background:ge?"#FAFAFA":"#27272A",color:ge?"#A1A1AA":"#FFF",height:"100%",ml:"0px !important",cursor:ge?"not-allowed":"pointer",borderLeft:{xs:"none",sm:"none",md:"solid 1px #E4E4E7"},borderRadius:{xs:"46px",sm:"46px",md:"unset"}},children:[f("popup.submit"),"loading"===j&&(0,l.jsx)(C,{width:32,height:32,sx:{ml:"32px"}})]})})]})]})},re=t(88318);function oe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var ie=function(e){var n,t=e.user,s=e.open,r=e.onClose,o=e.chosenReward,i=(0,Q.d)(),d=i.login,u=(i.logout,Y()),p=u.validation,m=u.checkValidatedConditions,h=(0,q.p)().setTip,f=(0,$.a)().setUser,g=(0,x.J)().t,b=(0,I.W)().request,E=(0,I.Q)((function(e){var n=e.rewardId,t=e.receivedAddress,s=e.address,r=e.discordId;return b(A.F2,{method:"POST",data:{rewardId:n,receivedAddress:t,address:s,discordId:r}})})),j=E.status,y=E.error,w=E.response,S=E.launch,_=(0,a.useState)(),K=_[0],T=_[1],N=(0,a.useState)(),W=N[0],M=N[1],D=(0,a.useState)(!1),P=D[0],L=D[1],U=(0,a.useState)(!1),G=U[0],J=U[1],V=(0,a.useMemo)((function(){return P&&!re.UJ(K||"")}),[P,K]),ee=(0,a.useMemo)((function(){return G&&!W}),[G,W]),ne=(0,a.useMemo)((function(){return!p.positive||"loading"===j}),[j,p.positive]);return(0,a.useEffect)((function(){s||(T(void 0),L(!1),J(!1))}),[s]),(0,a.useEffect)((function(){var e=[{check:function(){return!t||!t.points},msg:"No User Points"},{check:function(){return!o||!(null===o||void 0===o?void 0:o.point)},msg:"Unexchangeable Reward"},{check:function(){return((null===t||void 0===t?void 0:t.points)||0)<((null===o||void 0===o?void 0:o.point)||0)},msg:"Not enough points"},{check:function(){return!K},msg:"Empty Address"},{check:function(){return!re.UJ(K||"")},msg:"Invalid Address"}];(null===o||void 0===o?void 0:o.type)===z.E4.GENESIS_NFT&&e.push({check:function(){return!W},msg:"Empty Discord Id"}),m(e)}),[m,o,W,K,t]),(0,a.useEffect)((function(){if("success"===j){var e=w.userInfo;return t&&e&&f(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},s=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),s.forEach((function(n){oe(e,n,t[n])}))}return e}({},t,{points:e.points})),r(),void h({status:!0,type:"success",msg:"Success"})}if("failed"===j)return r(),void h({status:!0,type:"error",msg:y.data.msg||"Something went wrong"})}),[null===y||void 0===y||null===(n=y.data)||void 0===n?void 0:n.msg,j]),(0,l.jsxs)(F.Z,{open:s,onClose:r,maxWidth:!1,sx:{".MuiPaper-elevation":{maxWidth:"100%",m:0,width:{xs:"100%",sm:"100%",md:"auto"},position:{xs:"absolute",sm:"absolute",md:"unset"},bottom:{xs:0,sm:0,md:"unset"}}},children:[(0,l.jsxs)(O.Z,{sx:{color:"#000",display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:800},children:[(0,l.jsx)("span",{children:g("popup.claim_your_rewards")}),(0,l.jsx)(B.Z,{style:{cursor:"pointer"},onClick:r})]}),(0,l.jsxs)(R.Z,{sx:{width:{xs:"100%",sm:"100%",md:"840px"},p:"52px 24px 36px 24px",paddingTop:"16px !important",borderTop:"1px solid #E4E4E7"},children:[(0,l.jsx)(X.Z,{error:V,label:"".concat(g("popup.wallet_address")," *"),placeholder:"Type your address here...",fullWidth:!0,onChange:function(e){!P&&L(!0),T(e.target.value)}}),(null===o||void 0===o?void 0:o.type)===z.E4.GENESIS_NFT&&(0,l.jsx)(X.Z,{error:ee,label:"Discord ID",placeholder:"Type your ID here...",fullWidth:!0,sx:{mt:"24px"},onChange:function(e){!G&&J(!0),M(e.target.value)}}),(0,l.jsxs)(c.Z,{sx:{height:"110px",width:"100%",background:"#FAFAFA",border:"solid 1px #E4E4E7",mt:"36px",borderRadius:"8px",display:"flex",fontSize:{xs:"11px",sm:"11px",md:"unset"},alignItems:"center",div:{flex:1,textAlign:"center"}},children:[(0,l.jsxs)(c.Z,{children:[g("popup.points_for_reward"),(0,l.jsx)(c.Z,{children:(null===o||void 0===o?void 0:o.point)||"--"})]}),(0,l.jsxs)(c.Z,{children:[g("popup.total_points"),(0,l.jsx)(c.Z,{children:(null===t||void 0===t?void 0:t.totalPoints)||0})]}),(0,l.jsxs)(c.Z,{children:[g("popup.left_points"),(0,l.jsx)(c.Z,{children:(null===t||void 0===t?void 0:t.points)||0})]})]})]}),(0,l.jsxs)(H.Z,{sx:{height:{xs:"46px",sm:"46px",md:"80px"},borderTop:{xs:"none",sm:"none",md:"solid 1px #E4E4E7"},p:0,fontSize:{xs:"15px",sm:"15px",md:"24px"},fontWeight:700,cursor:"pointer",display:"flex",justifyContent:"space-evenly",mb:{xs:"32px",sm:"32px",md:"unset"}},children:[(0,l.jsx)(c.Z,{onClick:function(){r()},sx:{width:{xs:"45%",sm:"45%",md:"50%"},borderRadius:{xs:"46px",sm:"46px",md:"unset"},display:"flex",justifyContent:"center",alignItems:"center",height:"100%",background:"#FAFAFA",color:"#A1A1AA"},children:g("popup.not_this_time")}),(0,l.jsx)(v.Z,{title:p.msg||"",placement:"top",children:(0,l.jsxs)(c.Z,{onClick:function(){var e;ne||(null===o||void 0===o?void 0:o.id)&&K&&(null===(e=d())||void 0===e||e.then((function(){return S({rewardId:null===o||void 0===o?void 0:o.id,receivedAddress:K,discordId:W})})).then((function(){var e="";switch(o.type){case z.E4.DISCORD_ROLE:e="Discord Role";break;case z.E4.GENESIS_NFT:e="Genesis NFT";break;case z.E4.KEKKAI_SBT:e="Kekkai SBT";break;case z.E4.ONE_KEY:e="One Key";break;default:e="Other"}(0,Z.KM)(k.nz.REWARD_EXCHANGE_SUCCESS,{stage:null===t||void 0===t?void 0:t.stage,stageTime:null===t||void 0===t?void 0:t.timestamp,userType:(0,Z.Ng)(t),rewardId:null===o||void 0===o?void 0:o.id,rewardName:e,rewardType:null===o||void 0===o?void 0:o.type})})))},sx:{width:{xs:"45%",sm:"45%",md:"50%"},display:"flex",justifyContent:"center",alignItems:"center",background:ne?"#FAFAFA":"#27272A",color:ne?"#A1A1AA":"#FFF",height:"100%",ml:"0px !important",borderLeft:{xs:"none",sm:"none",md:"solid 1px #E4E4E7"},cursor:ne?"not-allowed":"pointer",borderRadius:{xs:"46px",sm:"46px",md:"unset"}},children:[g("popup.submit"),"loading"===j&&(0,l.jsx)(C,{width:32,height:32,sx:{ml:"32px"}})]})})]})]})},de=t(68415);function le(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,s=new Array(n);t<n;t++)s[t]=e[t];return s}function ae(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return le(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return le(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ce=function(e){var n=e.user,t=e.userStatus,s=(0,a.useRef)(["Discord Supporter Role","KEKKAI SBT","GENESIS NFT","KEKKAI ONE KEY"]),r=(0,x.J)().t,o=(0,de.C)().size,i=(0,I.Q)((function(e){var n=e.address;return(0,_.W)(A.Rk,{method:"GET",params:{address:n}})})),d=i.status,p=i.response,m=i.launch,f=(0,a.useState)(!1),v=f[0],b=f[1],E=(0,a.useState)(!1),j=E[0],y=E[1],w=(0,a.useState)(!1),S=w[0],F=w[1],O=(0,a.useState)(!1),R=O[0],K=O[1],T=(0,a.useState)(),N=T[0],W=T[1],M=(0,a.useMemo)((function(){return(null===p||void 0===p?void 0:p.sort((function(e,n){return n.timestamp-e.timestamp})))||[]}),[p]),D=(0,a.useMemo)((function(){return(null===n||void 0===n?void 0:n.refers)&&ae(n.refers).sort((function(e,n){return(e.stage||0)-(n.stage||0)}))||[]}),[null===n||void 0===n?void 0:n.refers]),P=(0,a.useCallback)((function(){F(!1),W(void 0)}),[]),L=(0,a.useCallback)((function(e){W(e),F(!1),K(!0)}),[]),B=(0,a.useCallback)((function(){F(!1),K(!1),W(void 0)}),[]);return(0,a.useEffect)((function(){(null===n||void 0===n?void 0:n.address)&&m({address:n.address})}),[m,n]),(0,l.jsxs)(u.Z,{sx:{mt:"24px",display:"flex",flexDirection:{xs:"column-reverse",sm:"column-reverse",md:"row"},justifyContent:"space-between"},children:[(0,l.jsxs)(c.Z,{sx:{width:{xs:"100%",sm:"100%",md:"300px"},border:"1px solid #E4E4E7",borderRadius:"12px",overflow:"hidden",mt:{xs:"24px",sm:"24px",md:"0px"},position:"relative",height:"100%"},children:[(0,l.jsxs)(c.Z,{sx:{display:"flex",flexDirection:{xs:"row",sm:"row",md:"column"},justifyContent:"space-evenly"},children:[(0,l.jsxs)(c.Z,{sx:{height:200,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderBottom:"1px solid #E4E4E7"},children:[(0,l.jsxs)(c.Z,{sx:{fontSize:{xs:36,sm:36,md:64},fontWeight:800},children:[("loading"===t||"prepared"===t)&&(0,l.jsx)(C,{}),"success"===t&&((null===n||void 0===n?void 0:n.totalPoints)||0)]}),(0,l.jsx)(c.Z,{sx:{fontSize:{xs:12,sm:12,md:20},fontWeight:400},children:r("referral.dashboard_total")})]}),(0,l.jsxs)(c.Z,{sx:{height:200,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderBottom:"1px solid #E4E4E7"},children:[(0,l.jsxs)(c.Z,{sx:{fontSize:{xs:36,sm:36,md:64},fontWeight:800},children:[("loading"===t||"prepared"===t)&&(0,l.jsx)(C,{}),"success"===t&&((null===n||void 0===n?void 0:n.points)||0)]}),(0,l.jsx)(c.Z,{sx:{fontSize:{xs:12,sm:12,md:20},fontWeight:400},children:r("referral.dashboard_left")})]})]}),(0,l.jsx)(c.Z,{onClick:function(){n&&(0,Z.KM)(k.ng.REFERRAL_SELECT_REWARD,{stage:n.stage,stageTime:n.timestamp,userType:(0,Z.Ng)(n)}),n&&F(!0)},sx:{height:{xs:60,sm:60,md:100},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontSize:{xs:16,sm:16,md:24},fontWeight:800,background:"#27272A",cursor:"pointer",color:"#FFF"},children:r("referral.dashboard_select")})]}),(0,l.jsxs)(c.Z,{sx:{width:{xs:"100%",sm:"100%",md:"calc(100% - 270px)"},ml:{xs:"none",sm:"none",md:"24px"},border:"1px solid #E4E4E7",borderRadius:"12px"},children:[(0,l.jsx)(c.Z,{sx:{fontSize:{xs:16,sm:16,md:24},fontWeight:800,height:80,lineHeight:"80px",p:"0 24px",borderBottom:"1px solid #E4E4E7"},children:r("referral.dashboard_log")}),(0,l.jsxs)(c.Z,{sx:{height:50,p:"24px",borderBottom:"1px solid #E4E4E7",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,l.jsx)(c.Z,{sx:{fontSize:{xs:12,sm:12,md:16}},children:r("referral.dashboard_accounts")}),(0,l.jsxs)(c.Z,{onClick:function(){return D.length>0&&b(!0)},sx:{alignItems:"center",cursor:"pointer",display:D.length>3?"flex":"none",fontSize:{xs:12,sm:12,md:16}},children:[(0,l.jsx)(c.Z,{children:"More"}),(0,l.jsx)(h.Z,{})]})]}),(0,l.jsxs)(c.Z,{sx:{p:"12px 24px",minHeight:160,borderBottom:"1px solid #E4E4E7",position:"relative"},children:[("loading"===t||"prepared"===t)&&(0,l.jsx)(C,{sx:{position:"absolute",left:"calc(50% - 37.5px)",top:"calc(50% - 37.5px)"}}),"success"===t&&(D.length>0?D.slice(0,3).map((function(e){return(0,l.jsxs)(c.Z,{sx:{mb:{xs:"16px",sm:"16px",md:"24px"},fontSize:{xs:"12px",sm:"14px",md:"16px"},display:"flex",flexWrap:"wrap",alignItems:"center",wordBreak:"break-all",justifyContent:"space-between"},children:[e.address,(0,l.jsx)(c.Z,{sx:{div:{height:"30px",lineHeight:"30px",borderRadius:"33px",fontWeight:700,p:{xs:"0 4px",sm:"0 4px",md:"0 12px"},fontSize:"10px",ml:{xs:"0px",sm:"0px",md:"32px"},mt:{xs:"10px",sm:"10px",md:"0px"},overflow:"hidden",width:"150px",textAlign:"center"}},children:e.stage===z.Mi.COMPLETE?(0,l.jsx)(c.Z,{sx:{background:"rgba(16, 189, 125, 0.1)",color:"rgba(16, 189, 125, 1)"},children:"Complete"}):e.stage===z.Mi.NOT_USE?(0,l.jsx)(c.Z,{sx:{background:"rgba(249, 115, 22, 0.1)",color:"rgba(249, 115, 22, 1)"},children:"Not yet use KEKKAI"}):(0,l.jsx)(c.Z,{sx:{background:"rgba(244, 63, 94, 0.1)",color:"rgba(244, 63, 94, 1)"},children:"Not yet install KEKKAI"})})]},e.address)})):r("referral.dashboard_no_accounts"))]}),(0,l.jsxs)(c.Z,{sx:{height:50,p:"24px",borderBottom:"1px solid #E4E4E7",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,l.jsx)(c.Z,{children:r("referral.dashboard_rewards")}),(0,l.jsxs)(c.Z,{onClick:function(){return M.length>0&&y(!0)},sx:{alignItems:"center",cursor:"pointer",display:M.length>3?"flex":"none"},children:["More",(0,l.jsx)(h.Z,{})]})]}),(0,l.jsxs)(c.Z,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"wrap",md:"nowrap"},alignItems:"start",minHeight:160,p:"24px",position:"relative"},children:[("loading"===d||"prepared"===d)&&(0,l.jsx)(C,{sx:{position:"absolute",left:"calc(50% - 37.5px)",top:"calc(50% - 37.5px)"}}),"success"===d&&(M.length>0?M.slice(0,"md"===o?6:8).map((function(e,n){return(0,l.jsxs)(c.Z,{sx:{mr:{xs:"0px",sm:"0px",md:"48px"},textAlign:"center",width:{xs:"24%",sm:"24%",md:"65px"}},children:[(0,l.jsx)(g.Z,{component:"img",src:"/images/refer/reward-0".concat(Number(e.type)+1,".png"),sx:{width:{xs:48,sm:48,md:60},height:{xs:48,sm:48,md:60},borderRadius:"50%"}}),(0,l.jsx)(c.Z,{sx:{color:"#27272A",fontSize:"12px",textAlign:"center",wordBreak:"keep-all"},children:s.current[Number(e.type)]||e.type})]},n)})):r("referral.dashboard_no_rewards"))]})]}),(0,l.jsx)(U,{users:D,open:v,onClose:function(){return b(!1)}}),(0,l.jsx)(G,{rewards:M,open:j,onClose:function(){return y(!1)}}),(0,l.jsx)(V,{open:S,onClose:P,user:n,onConfirm:L,convertedRewards:p}),(0,l.jsx)(ne,{open:R&&(null===N||void 0===N?void 0:N.type)===z.E4.DISCORD_ROLE,user:n,chosenReward:N,onClose:B}),(0,l.jsx)(ie,{open:R&&((null===N||void 0===N?void 0:N.type)===z.E4.GENESIS_NFT||(null===N||void 0===N?void 0:N.type)===z.E4.KEKKAI_SBT),user:n,chosenReward:N,onClose:B}),(0,l.jsx)(se,{open:R&&(null===N||void 0===N?void 0:N.type)===z.E4.ONE_KEY,user:n,chosenReward:N,onClose:B})]})},ue=t(8077),pe=t(57796),xe=t(87959),me=t(43986),he=t(68336),fe=t(64819),ge=t(11002),ve=t(76356),be=t(34601);function Ee(e,n,t,s,r,o,i){try{var d=e[o](i),l=d.value}catch(a){return void t(a)}d.done?n(l):Promise.resolve(l).then(s,r)}function je(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var ye=function(){var e=(0,ue.O)().address,n=(0,pe.L)().deviceId,t=(0,$.a)(),s=t.user,r=t.userStatus,o=t.setUser,i=t.setUserStatus,u=(0,Q.d)().login,m=(0,p.useRouter)(),h=(0,q.p)().setTip,g=((0,x.J)().t,(0,a.useState)(!1)),v=g[0],b=g[1],E=(0,a.useState)("loading"),j=E[0],y=E[1],w=(0,a.useState)("loading"),Z=w[0],k=w[1],C=(0,a.useCallback)((function(){s&&n&&(i("loading"),(0,_.W)(A.JA,{method:"GET",params:{address:s.address,deviceId:n}}).then((function(e){o(e),i("success")})).catch((function(e){console.log(e),i("failed")})))}),[n,o,i,s]);return(0,a.useEffect)((function(){var n;e&&(j||v||(n=d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u();case 3:b(!0),e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),h({status:!0,msg:"Sign rejected",type:"error"}),window.localStorage.removeItem("signature");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var e=this,t=arguments;return new Promise((function(s,r){var o=n.apply(e,t);function i(e){Ee(o,s,r,i,d,"next",e)}function d(e){Ee(o,s,r,i,d,"throw",e)}i(void 0)}))})())}),[e,u,m,h,j,v]),(0,a.useEffect)((function(){var e;s.address&&((null===(e=s.violation)||void 0===e?void 0:e.length)&&s.violation.includes(ve.F.REFER_USAGE_TERM)?k("show"):s.referTermConfirmed?y("none"):y("show"))}),[s]),(0,a.useEffect)((function(){document.body.style.overflowY="show"===j||"show"===Z?"hidden":"auto"}),[j,Z]),(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(be.Z,{}),(0,l.jsx)(f,{home:{name:"KEKKAI Refer a friend",path:"/refer"},breads:[{name:"Referral"}]}),e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(S,{user:s}),(0,l.jsx)(ce,{address:e,user:s,userStatus:r,deviceId:n,refreshUser:C})]}):(0,l.jsx)(xe.Z,{sx:{m:"auto",mt:"64px"}}),"show"===Z&&(0,l.jsx)(me.Z,{okText:"Appeal",cancelText:"Close",okCallback:function(){m.push("/feedback?opt=other")},cancelCallback:function(){k("none"),m.push("/refer")},children:(0,l.jsx)(fe.Z,{})}),"show"===j&&(0,l.jsx)(me.Z,{okText:"Agree & Continue",okCallback:function(){(0,ge.lu)(s.address).then((function(){o(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},s=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),s.forEach((function(n){je(e,n,t[n])}))}return e}({},s,{referTermConfirmed:!0})),y("none")})).catch((function(e){console.log(e),h({status:!0,msg:e.data.msg||"Reject",type:"error"})})),y("none")},cancelCallback:function(){m.push("/")},children:(0,l.jsx)(he.Z,{})})]})}}},function(e){e.O(0,[6440,1592,9049,6094,3635,2897,9774,2888,179],(function(){return n=4688,e(e.s=n);var n}));var n=e.O();_N_E=n}]);